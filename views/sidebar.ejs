<!DOCTYPE html>
<html lang="en">

<head>
  <title>Responsive Sidebar</title>
  <!-- Link Styles -->
 <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
</head>

<body>
  <div class="container-fluid d-flex justify-content-lg-center "  style="background-color: rgb(194, 201, 201);">
  <div class="container-width ">
    <div class="  sidebar open  ">
      <div class="logo_details">
        <i class="bx bxl-audible icon"></i>
        <div class="logo_name">Code Effect</div>
        <i class="bx bx-menu" id="btn"></i>
      
      </div>
      <ul class="nav-list">

        <li>
          <a href="#">
            <i class="bx bx-grid-alt"></i>
            <span class="link_name">Dashboard</span>
          </a>
          <span class="tooltip">Dashboard</span>
          <p class="" style="font-size: 10px;">menu</p>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-user"></i>
            <span class="link_name">User</span>
          </a>
          <span class="tooltip">User</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-chat"></i>
            <span class="link_name">Message</span>
          </a>
          <span class="tooltip">Message</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-pie-chart-alt-2"></i>
            <span class="link_name">Analytics</span>
          </a>
          <span class="tooltip">Analytics</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-folder"></i>
            <span class="link_name">File Manger</span>
          </a>
          <span class="tooltip">File Manger</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-cart-alt"></i>
            <span class="link_name">Order</span>
          </a>
          <span class="tooltip">Order</span>
        </li>
        <li>
          <a href="#">
            <i class="bx bx-cog"></i>
            <span class="link_name">Settings</span>
          </a>
          <span class="tooltip">Settings</span>
        </li>
        <li class="profile">
          <div class="profile_details">
            <img src="profile.jpeg" alt="profile image">
            <div class="profile_content">
              <div class="name">Anna Jhon</div>
              <div class="designation">Admin</div>
            </div>
          </div>
          <i class="bx bx-log-out" id="log_out"></i>
        </li>
      </ul>
    </div>
    <div class="fkside"></div>
    <section class="home-section ">
      <div class="profile-div3  ">
        <div class="h-auto w-100">
          <div class="col-lg-12 usr-details">
            <div class="card  ps5pb3">
              <div class="profile-info-div1 d-flex rounded-3 ">
                <div class="w-75 ">
                  <h2 class="heading m-0">Personal information</h2>

                </div>
                <div class=" d-flex justify-content-end">
                  <button type="button" class="profile-edit-button" data-bs-toggle="modal" data-bs-target="#myModal">
                    Edit
                  </button>
                  <div class="profile-oldbutton-div">
                    <button type="button" class="profile-add-button  " data-bs-toggle="modal"
                      data-bs-target="#addAddressModal">
                      add Address
                    </button>
                  </div>


                </div>

              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0     ">Name :</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="text-muted mb-0">
                      <%= user.name %>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">second name :</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="sub-details-text mb-0">
                      <%= user.second_name %>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Email :</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="sub-details-text mb-0">
                      <%= user.email %>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Mobile :</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="sub-details-text mb-0">
                      <%= user.number %>
                    </p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-sm-3">
                    <p class="mb-0">Gender :</p>
                  </div>
                  <div class="col-sm-9">
                    <p class="sub-details-text mb-0">
                      <%= user.gender %>
                    </p>
                  </div>
                </div>
              </div>

              <div class="profile-newbtn-div">
                <button type="button" class="profile-add-button  " data-bs-toggle="modal"
                  data-bs-target="#addAddressModal">
                  add Address
                </button>
              </div>
            </div>
          </div>

        </div>
        <div class="h-auto w-100 mt-2 box-shadows">

          <% for(let i=0; i < address.address.length;i++){ %>

            <div class="accordion mb-2 " id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button hov bg-transparent no-focus-outline" type="button"
                    data-bs-toggle="collapse" data-bs-target="#collapse<%= i %>" aria-expanded="false"
                    aria-controls="collapse<%=i%>">
                    Adress <%= i+1 %>
                  </button>

                </h2>
                <div id="collapse<%= i %>" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                  <div class="accordion-body">

                    <div class="col-lg-12  ">
                      <div class="card ">
                        <div class="bg-white d-flex  pe-5  pt-3 rounded-3 d-flex align-items-center">
                          <h2 class="heading"> Address</h2>

                          <button type="button" class="address-edit-button" data-bs-toggle="modal"
                            data-bs-target="#myModals<%=i%>">
                            Edit
                          </button>
                          <!-- <button type="button" class="btn btn-outline-primary h-50" onclick="deleteAddress('<%= i %>')">
                            delete
                    </button> -->
                          <button class="profile-delete-button "
                            onclick="deleteAddress( '<%=i%>', '<%=userid._id %>')">Delete </button>

                        </div>
                        <div class="card-body">
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">Adress</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%= address.address[i].first_address%>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">Country</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%=address.address[i].country %>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">State</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%=address.address[i].state %>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">District</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%=address.address[i].district %>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">Town</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%=address.address[i].town %>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">locality</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%=address.address[i].locality%>
                              </p>
                            </div>
                          </div>
                          <hr>
                          <div class="row">
                            <div class="col-sm-3">
                              <p class="mb-0">post code</p>
                            </div>
                            <div class="col-sm-9">
                              <p class="text-muted mb-0">
                                <%= address.address[i].pincode %>
                              </p>
                            </div>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


            </div>
            <div class="modal fade" id="myModals<%=i%>" tabindex="-1" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <!-- Modal Header -->
                  <div class="modal-header">
                    <h5 class="modal-title">Edit Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <!-- Modal Body -->
                  <form method="post" action="/editAddress">
                    <div class="modal-body">
                      <div class="mb-3">
                        <label for="address" class="col-form-label">Address:</label>
                        <input type="text" class="form-control" id="address" name="address1"
                          placeholder="<%=address.address[i].first_address %>">
                        <input type="hidden" name="userid" value="<%=userid._id %>">
                        <input type="hidden" name="addressid" value="<%= address.address[i]._id %>">
                      </div>
                      <div class="mb-3">
                        <label for="Country" class="col-form-label">Country</label>
                        <select name="country" id="" class="form-control"
                          aria-placeholder="<%= address.address[i].country %>">

                          <option value="india">india</option>
                          <option value="srilanka">srilanka</option>
                          <option value="America">America</option>
                          <option value="china"> China</option>
                        </select>
                      </div>
                      <div class="mb-3">
                        <label for="State" class="col-form-label">Country</label>
                        <select name="state" id="" class="form-control"
                          aria-placeholder="<%= address.address[i].state %>">

                          <option value="kerala">kerala</option>
                          <option value="karnataka">karnataka</option>
                          <option value="tamilnadu">tamilnadu</option>
                          <option value="maharashtra"> maharashtra</option>
                        </select>
                      </div>
                      <div class="mb-3 d-flex">
                        <div class="flex-grow-1">
                          <label for="district" class="col-form-label">District:</label>
                          <select name="district" id="district" class="form-control"
                            aria-placeholder="<%=address.address[i].district%>">
                            <option value="malappuram">Malappuram</option>
                            <option value="kozhikode">Kozhikode</option>
                            <option value="wayanad">Wayanad</option>
                            <option value="kannur">Kannur</option>
                          </select>
                        </div>
                        <div class="flex-grow-1 ps-3">
                          <label for="pincode" class="col-form-label">Pincode:</label>
                          <input type="text" class="form-control" id="pincode"
                            placeholder="<%= address.address[i].pincode %>">
                        </div>
                      </div>
                      <div class="mb-3">
                        <label class="col-form-label">Town:</label>
                        <input class="form-control" name="town" placeholder="<%= address.address[i].town%>">
                      </div>
                      <div>
                        <label class="col-form-label">Locality:</label>
                        <input class="form-control" name="locality" placeholder="<%= address.address[i].locality %>">
                      </div>

                    </div>

                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

            <% } %>

        </div>
      </div>
    </section>
  

  </div>
</div>
  <!-- Scripts -->
  <script>

window.onload = function () {
      const sidebar = document.querySelector(".sidebar");
      const closeBtn = document.querySelector("#btn");

      closeBtn.addEventListener("click", function () {
        sidebar.classList.toggle("open")
        menuBtnChange()
      })

      

      // Call the checkScreenSize function on page load
      checkScreenSize();

      // Call the checkScreenSize function whenever the window is resized
      window.addEventListener("resize", checkScreenSize);

      function checkScreenSize() {
        // Get the current window width
        const windowWidth = window.innerWidth;
        console.log("---",windowWidth)
        console.log(window.innerWidth)

        // If the window width is less than 1200px, remove the "open" class
        if (windowWidth < 1200) {
          sidebar.classList.remove("open");
        } else {
          sidebar.classList.add("open");
        }
      }

      function menuBtnChange() {
        if (sidebar.classList.contains("open")) {
          closeBtn.classList.replace("bx-menu-alt-right", "bx-menu")
        } else {
          closeBtn.classList.replace("bx-menu", "bx-menu-alt-right")
        }
      }
    }
  </script>
</body>

</html>